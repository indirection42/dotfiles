# Homebrew settings
[ -d /opt/homebrew ] && eval "$(/opt/homebrew/bin/brew shellenv)"
if command -v brew >/dev/null 2>&1; then
  LLVM_PATH=$(brew --prefix llvm 2>/dev/null)
  if [ -n "$LLVM_PATH" ] && [ -d "$LLVM_PATH" ]; then
    export PATH="$LLVM_PATH/bin:$PATH"
    export LIBCLANG_PATH="$LLVM_PATH/lib"
    export LDFLAGS="-L$LLVM_PATH/lib"
    export CPPFLAGS="-I$LLVM_PATH/include"
    #export DYLD_LIBRARY_PATH="$LLVM_PATH/lib"
    # fallback path is searched at last, which is safer
    # which is also the cargo book recommends
    export DYLD_FALLBACK_LIBRARY_PATH="$LLVM_PATH/lib"
  fi
fi

# Vim 
VI_MODE_SET_CURSOR=true
#alias vim="nvim"
#export VIMCONFIG=~/.config/nvim
#export VIMDATA=~/.local/share/nvim
export EDITOR=vim

# Rust
[ -f "$HOME/.cargo/env" ] && . "$HOME/.cargo/env" # cargo-env

# Fast node manager
if command -v fnm >/dev/null 2>&1; then
  eval "$(fnm env --use-on-cd --version-file-strategy=recursive --resolve-engines)"
fi

# Bun
if [ -d "$HOME/.bun" ]; then
  export BUN_INSTALL="$HOME/.bun"
  export PATH="$BUN_INSTALL/bin:$PATH"
fi

# bun completions
[ -s "$BUN_INSTALL/_bun" ] && source "$BUN_INSTALL/_bun"

# Python managed by uv
[ -f "$HOME/.local/bin/env" ] && . "$HOME/.local/bin/env"

# Solana cli
[ -d "$HOME/.local/share/solana/install/active_release/bin" ] && export PATH="$HOME/.local/share/solana/install/active_release/bin:$PATH"

# Foundry
[ -d "$HOME/.foundry/bin" ] && export PATH="$HOME/.foundry/bin:$PATH"

# Added by Antigravity
[ -d "/Users/indirection42/.antigravity/antigravity/bin" ] && export PATH="/Users/indirection42/.antigravity/antigravity/bin:$PATH"
